(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45911f22"],{"00b4":function(e,t,r){"use strict";r("ac1f");var n=r("23e7"),o=r("da84"),a=r("c65b"),c=r("e330"),i=r("1626"),l=r("861d"),s=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=o.Error,d=c(/./.test);n({target:"RegExp",proto:!0,forced:!s},{test:function(e){var t=this.exec;if(!i(t))return d(this,e);var r=a(t,this,e);if(null!==r&&!l(r))throw new u("RegExp exec method returned something other than an Object or null");return!!r}})},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("d3b7");function n(e,t,r,n,o,a,c){try{var i=e[a](c),l=i.value}catch(s){return void r(s)}i.done?t(l):Promise.resolve(l).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var c=e.apply(t,r);function i(e){n(c,o,a,i,l,"next",e)}function l(e){n(c,o,a,i,l,"throw",e)}i(void 0)}))}}},6965:function(e,t,r){"use strict";r.r(t);r("99af");var n=r("7a23"),o={class:"container mt-3"},a={class:"text-end"},c=["disabled"],i={class:"table align-middle"},l=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th"),Object(n["createElementVNode"])("th",null,"品名"),Object(n["createElementVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["createElementVNode"])("th",{class:"col-md-2"},"單價")])],-1),s={key:0},u={colspan:"6"},d=["onClick"],m={class:"input-group input-group-sm"},f={class:"input-group mb-3"},b=["onUpdate:modelValue","onChange","disabled"],p=["value"],h={class:"input-group-text",id:"basic-addon2"},v={class:"text-end"},O={key:0},j=Object(n["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),y={class:"text-end"},g=Object(n["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),E={class:"text-end text-success"},V={class:"my-5 row justify-content-center"};function N(e,t,r,N,w,x){var k,C,L=Object(n["resolveComponent"])("Loading"),_=Object(n["resolveComponent"])("CartNone"),D=Object(n["resolveComponent"])("CheckoutForm");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createVNode"])(L,{active:N.isLoading},null,8,["active"]),Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return N.clearAllCarts&&N.clearAllCarts.apply(N,arguments)}),class:"btn btn-outline-danger",type:"button",disabled:0===(null===(k=N.cartData)||void 0===k||null===(C=k.carts)||void 0===C?void 0:C.length)}," 清空購物車 ",8,c)]),Object(n["createElementVNode"])("table",i,[l,Object(n["createElementVNode"])("tbody",null,[0===N.cartData.carts.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",s,[Object(n["createElementVNode"])("td",u,[Object(n["createVNode"])(_)])])):Object(n["createCommentVNode"])("",!0),N.cartData.carts.length>0?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:1},Object(n["renderList"])(N.cartData.carts,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{onClick:function(t){return N.removeCartItem(e.id)},type:"button",class:"btn btn-outline-danger btn-sm"}," x ",8,d)]),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.product.title),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("div",f,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{"onUpdate:modelValue":function(t){return e.qty=t},class:"form-select",onChange:function(t){return N.updateCartItem(e)},disabled:N.isLoadingItem===e.id},[(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(20,(function(t){return Object(n["createElementVNode"])("option",{value:t,key:"".concat(t).concat(e.id)},Object(n["toDisplayString"])(t),9,p)})),64))],40,b),[[n["vModelSelect"],e.qty]]),Object(n["createElementVNode"])("span",h,Object(n["toDisplayString"])(e.product.unit),1)])])]),Object(n["createElementVNode"])("td",v," NT$"+Object(n["toDisplayString"])(e.total),1)])})),128)):Object(n["createCommentVNode"])("",!0)]),N.cartData.carts.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tfoot",O,[Object(n["createElementVNode"])("tr",null,[j,Object(n["createElementVNode"])("td",y,Object(n["toDisplayString"])(N.cartData.total),1)]),Object(n["createElementVNode"])("tr",null,[g,Object(n["createElementVNode"])("td",E,Object(n["toDisplayString"])(N.cartData.final_total),1)])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",V,[Object(n["createVNode"])(D)])])}r("b0c0");var w={class:"mb-3"},x=Object(n["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),k={class:"mb-3"},C=Object(n["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),L={class:"mb-3"},_=Object(n["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),D={role:"alert",class:"invalid-feedback"},S={class:"mb-3"},B=Object(n["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),F={class:"mb-3"},I=Object(n["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),R=Object(n["createElementVNode"])("div",{class:"text-end"},[Object(n["createElementVNode"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function T(e,t,r,o,a,c){var i=Object(n["resolveComponent"])("Field"),l=Object(n["resolveComponent"])("ErrorMessage"),s=Object(n["resolveComponent"])("Form");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"formRef",class:"col-md-6",autocomplete:"off","validation-schema":o.schema,onSubmit:o.submitOrder},{default:Object(n["withCtx"])((function(e){var r=e.errors;return[Object(n["createElementVNode"])("div",w,[x,Object(n["createVNode"])(i,{id:"email",name:"email",type:"email",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["email"]}]),placeholder:"請輸入 Email",modelValue:o.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.form.user.email=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(l,{name:"email",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",k,[C,Object(n["createVNode"])(i,{id:"name",name:"姓名",type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["姓名"]}]),placeholder:"請輸入姓名",modelValue:o.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.form.user.name=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(l,{name:"姓名",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",L,[_,Object(n["createVNode"])(i,{id:"tel",name:"mobile",type:"tel",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["mobile"]}]),placeholder:"請輸入手機號碼",modelValue:o.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.form.user.tel=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(l,{name:"mobile"},{default:Object(n["withCtx"])((function(e){var t=e.message;return[Object(n["createElementVNode"])("span",D,Object(n["toDisplayString"])(t),1)]})),_:1})]),Object(n["createElementVNode"])("div",S,[B,Object(n["createVNode"])(i,{id:"address",name:"地址",type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["地址"]}]),placeholder:"請輸入地址",modelValue:o.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.form.user.address=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(l,{name:"地址",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",F,[I,Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.form.message=e})},null,512),[[n["vModelText"],o.form.message]])]),R]})),_:1},8,["validation-schema","onSubmit"])}var G=r("1da1"),P=(r("96cf"),r("5502")),U=r("f8b7"),q=(r("ac1f"),r("00b4"),{mobile:function(e){return e?!!/^09\d{8}$/.test(e)||"手機格式不正確":"請輸入手機號碼"}}),A=r("7bb1"),M={name:"CheckoutForm",components:{Form:A["c"],Field:A["b"],ErrorMessage:A["a"]},setup:function(){var e=Object(n["reactive"])({user:{name:"",email:"",tel:"",address:""},message:""}),t={"姓名":"required",email:"required|email",mobile:q.mobile,"地址":"required"},r=Object(n["ref"])(null),o=Object(P["b"])(),a=function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.value.validate();case 2:if(n=t.sent,!n){t.next=17;break}return t.prev=4,t.next=7,Object(U["b"])(e);case 7:a=t.sent,alert(a.message),r.value.resetForm(),e.message="",o.dispatch("cart/findCart"),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](4),alert("購物車裡面沒有東西唷~");case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(){return t.apply(this,arguments)}}();return{form:e,schema:t,formRef:r,submitOrder:a}}},z=r("d959"),$=r.n(z);const J=$()(M,[["render",T]]);var Y=J,H=r("8474"),K=r.n(H),Q=function(e){return Object(n["pushScopeId"])("data-v-d064c632"),e=e(),Object(n["popScopeId"])(),e},W={class:"cart-none"},X=Q((function(){return Object(n["createElementVNode"])("img",{src:K.a,alt:""},null,-1)})),Z=Q((function(){return Object(n["createElementVNode"])("p",null,"購物車内暫時没有商品",-1)}));function ee(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",W,[X,Z,Object(n["createElementVNode"])("a",{href:"#",class:"btn btn-primary",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){return e.$router.push("/")}),["prevent"]))}," 繼續逛逛 ")])}var te={name:"CartNone"};r("ae40");const re=$()(te,[["render",ee],["__scopeId","data-v-d064c632"]]);var ne=re,oe={name:"Cart",components:{CheckoutForm:Y,CartNone:ne},setup:function(){var e=Object(n["ref"])(!0),t=Object(n["ref"])(""),r=Object(P["b"])();r.dispatch("cart/findCart").then((function(){e.value=!1}));var o=Object(n["computed"])((function(){return r.state.cart.cartData})),a=function(e){r.dispatch("cart/removeCart",e)},c=function(){r.dispatch("cart/clearAllCarts")},i=function(e){t.value=e.id,r.dispatch("cart/updateCart",{prodcutId:e.id,count:e.qty}).then((function(){t.value=""}))};return{isLoading:e,isLoadingItem:t,cartData:o,removeCartItem:a,clearAllCarts:c,updateCartItem:i}}};const ae=$()(oe,[["render",N]]);t["default"]=ae},8474:function(e,t,r){e.exports=r.p+"img/none.a7da9ce9.png"},"96cf":function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(S){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new L(n||[]);return a._invoke=w(e,r,c),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var d="suspendedStart",m="suspendedYield",f="executing",b="completed",p={};function h(){}function v(){}function O(){}var j={};l(j,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(_([])));g&&g!==r&&n.call(g,a)&&(j=g);var E=O.prototype=h.prototype=Object.create(j);function V(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function r(o,a,c,i){var l=u(e[o],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"===typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,i)}),(function(e){r("throw",e,c,i)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,i)}))}i(l.arg)}var o;function a(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}this._invoke=a}function w(e,t,r){var n=d;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===b){if("throw"===o)throw a;return D()}r.method=o,r.arg=a;while(1){var c=r.delegate;if(c){var i=x(c,r);if(i){if(i===p)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var l=u(e,t,r);if("normal"===l.type){if(n=r.done?b:m,l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=b,r.method="throw",r.arg=l.arg)}}}function x(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=u(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var r=e[a];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){while(++o<e.length)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:D}}function D(){return{value:t,done:!0}}return v.prototype=O,l(E,"constructor",O),l(O,"constructor",v),v.displayName=l(O,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,l(e,i,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},V(N.prototype),l(N.prototype,c,(function(){return this})),e.AsyncIterator=N,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new N(s(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},V(E),l(E,i,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=_,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),s=n.call(c,"finallyLoc");if(l&&s){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=n}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},ae40:function(e,t,r){"use strict";r("c07d")},c07d:function(e,t,r){},f8b7:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return s}));r("99af");var n=r("b775"),o="".concat("sheep-api"),a=function(e){return Object(n["a"])("/api/".concat(o,"/order"),"post",{data:e})},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Object(n["a"])("/api/".concat(o,"/admin/orders?page=").concat(e),"get")},i=function(e){return Object(n["a"])("/api/".concat(o,"/admin/order/").concat(e.id),"put",{data:e})},l=function(e){return Object(n["a"])("/api/".concat(o,"/admin/order/").concat(e),"delete")},s=function(){return Object(n["a"])("/api/".concat(o,"/admin/orders/all"),"delete")}}}]);
//# sourceMappingURL=chunk-45911f22.4dcf5601.js.map