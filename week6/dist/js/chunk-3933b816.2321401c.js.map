{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.test.js","webpack:///./src/views/front/cart/Index.vue","webpack:///./src/views/front/cart/components/CheckoutForm.vue","webpack:///./src/utils/vee-validate-schema.js","webpack:///./src/views/front/cart/components/CheckoutForm.vue?352a","webpack:///./src/views/front/cart/components/CartNone.vue","webpack:///./src/views/front/cart/components/CartNone.vue?7b6c","webpack:///./src/views/front/cart/Index.vue?05df","webpack:///./src/assets/images/none.png","webpack:///./src/views/front/cart/components/CartNone.vue?a01b","webpack:///./src/api/order.js"],"names":["$","global","call","uncurryThis","isCallable","isObject","DELEGATES_TO_EXEC","execCalled","re","exec","apply","this","arguments","test","Error","un$Test","target","proto","forced","str","result","class","_createElementVNode","style","colspan","id","_createElementBlock","_createVNode","_component_Loading","active","$setup","onClick","type","disabled","cartData","carts","length","_hoisted_3","_hoisted_5","_hoisted_6","_component_CartNone","_Fragment","key","_renderList","item","_hoisted_8","_toDisplayString","product","title","qty","$event","onChange","num","value","_hoisted_12","unit","total","_hoisted_15","_hoisted_16","_hoisted_18","final_total","_component_CheckoutForm","for","role","_createBlock","_component_Form","ref","autocomplete","validation-schema","onSubmit","errors","_hoisted_2","_component_Field","name","placeholder","user","email","_component_ErrorMessage","_hoisted_4","tel","message","_hoisted_9","address","_hoisted_11","cols","rows","mobile","components","Form","Field","ErrorMessage","setup","form","reactive","mySchema","姓名","schema","地址","formRef","store","useStore","submitOrder","validate","valid","createOrder","data","alert","resetForm","dispatch","__exports__","src","_imports_0","alt","href","_ctx","push","CheckoutForm","CartNone","isLoading","isLoadingItem","then","computed","state","cart","removeCartItem","clearAllCarts","updateCartItem","prodcutId","count","render","module","exports","path","order","request","getOrdersList","page"],"mappings":"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","file":"js/chunk-3933b816.2321401c.js","sourcesContent":["'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar DELEGATES_TO_EXEC = function () {\n  var execCalled = false;\n  var re = /[ac]/;\n  re.exec = function () {\n    execCalled = true;\n    return /./.exec.apply(this, arguments);\n  };\n  return re.test('abc') === true && execCalled;\n}();\n\nvar Error = global.Error;\nvar un$Test = uncurryThis(/./.test);\n\n// `RegExp.prototype.test` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.test\n$({ target: 'RegExp', proto: true, forced: !DELEGATES_TO_EXEC }, {\n  test: function (str) {\n    var exec = this.exec;\n    if (!isCallable(exec)) return un$Test(this, str);\n    var result = call(exec, this, str);\n    if (result !== null && !isObject(result)) {\n      throw new Error('RegExp exec method returned something other than an Object or null');\n    }\n    return !!result;\n  }\n});\n","<template>\r\n  <div class=\"container mt-3\">\r\n    <Loading :active=\"isLoading\" />\r\n    <!-- 購物車列表 -->\r\n    <div class=\"text-end\">\r\n      <button\r\n        @click=\"clearAllCarts\"\r\n        class=\"btn btn-outline-danger\"\r\n        type=\"button\"\r\n        :disabled=\"cartData?.carts?.length === 0\"\r\n      >\r\n        清空購物車\r\n      </button>\r\n    </div>\r\n    <table class=\"table align-middle\">\r\n      <thead>\r\n        <tr>\r\n          <th></th>\r\n          <th>品名</th>\r\n          <th style=\"width: 150px\">數量/單位</th>\r\n          <th class=\"col-md-2\">單價</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-if=\"cartData.carts.length === 0\">\r\n          <td colspan=\"6\">\r\n            <CartNone />\r\n          </td>\r\n        </tr>\r\n        <template v-if=\"cartData.carts.length > 0\">\r\n          <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\r\n            <td>\r\n              <button\r\n                @click=\"removeCartItem(item.id)\"\r\n                type=\"button\"\r\n                class=\"btn btn-outline-danger btn-sm\"\r\n              >\r\n                x\r\n              </button>\r\n            </td>\r\n            <td>\r\n              {{ item.product.title }}\r\n            </td>\r\n            <td>\r\n              <div class=\"input-group input-group-sm\">\r\n                <div class=\"input-group mb-3\">\r\n                  <select\r\n                    v-model=\"item.qty\"\r\n                    class=\"form-select\"\r\n                    @change=\"updateCartItem(item)\"\r\n                    :disabled=\"isLoadingItem === item.id\"\r\n                  >\r\n                    <option\r\n                      :value=\"num\"\r\n                      v-for=\"num in 20\"\r\n                      :key=\"`${num}${item.id}`\"\r\n                    >\r\n                      {{ num }}\r\n                    </option>\r\n                  </select>\r\n                  <span class=\"input-group-text\" id=\"basic-addon2\">\r\n                    {{ item.product.unit }}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td class=\"text-end\">\r\n              <!-- <small class=\"text-success\">折扣價：</small> -->\r\n              NT${{ item.total }}\r\n            </td>\r\n          </tr>\r\n        </template>\r\n      </tbody>\r\n      <tfoot v-if=\"cartData.carts.length > 0\">\r\n        <tr>\r\n          <td colspan=\"3\" class=\"text-end\">總計</td>\r\n          <td class=\"text-end\">{{ cartData.total }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n          <td class=\"text-end text-success\">\r\n            {{ cartData.final_total }}\r\n          </td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n    <div class=\"my-5 row justify-content-center\">\r\n      <CheckoutForm />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CheckoutForm from './components/CheckoutForm.vue'\r\nimport CartNone from './components/CartNone.vue'\r\nimport { useStore } from 'vuex'\r\nimport { computed, ref } from 'vue'\r\nexport default {\r\n  name: 'Cart',\r\n  components: { CheckoutForm, CartNone },\r\n  setup() {\r\n    const isLoading = ref(true)\r\n    const isLoadingItem = ref('')\r\n    const store = useStore()\r\n\r\n    // 獲取購物車清單\r\n    store.dispatch('cart/findCart').then(() => {\r\n      isLoading.value = false\r\n    })\r\n    const cartData = computed(() => store.state.cart.cartData)\r\n\r\n    // 刪除購物車內容\r\n    const removeCartItem = (id) => {\r\n      store.dispatch('cart/removeCart', id)\r\n    }\r\n\r\n    // 清空購物車 (全部刪除)\r\n    const clearAllCarts = () => {\r\n      store.dispatch('cart/clearAllCarts')\r\n    }\r\n\r\n    // 更新購物車\r\n    const updateCartItem = (item) => {\r\n      isLoadingItem.value = item.id\r\n      store\r\n        .dispatch('cart/updateCart', { prodcutId: item.id, count: item.qty })\r\n        .then(() => {\r\n          isLoadingItem.value = ''\r\n        })\r\n    }\r\n\r\n    return {\r\n      isLoading,\r\n      isLoadingItem,\r\n      cartData,\r\n      removeCartItem,\r\n      clearAllCarts,\r\n      updateCartItem\r\n    }\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <Form\r\n    ref=\"formRef\"\r\n    class=\"col-md-6\"\r\n    autocomplete=\"off\"\r\n    :validation-schema=\"schema\"\r\n    v-slot=\"{ errors }\"\r\n    @submit=\"submitOrder\"\r\n  >\r\n    <div class=\"mb-3\">\r\n      <label for=\"email\" class=\"form-label\">Email</label>\r\n      <Field\r\n        id=\"email\"\r\n        name=\"email\"\r\n        type=\"email\"\r\n        class=\"form-control\"\r\n        :class=\"{ 'is-invalid': errors['email'] }\"\r\n        placeholder=\"請輸入 Email\"\r\n        v-model=\"form.user.email\"\r\n      />\r\n      <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\r\n    </div>\r\n\r\n    <div class=\"mb-3\">\r\n      <label for=\"name\" class=\"form-label\">收件人姓名</label>\r\n      <Field\r\n        id=\"name\"\r\n        name=\"姓名\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        :class=\"{ 'is-invalid': errors['姓名'] }\"\r\n        placeholder=\"請輸入姓名\"\r\n        v-model=\"form.user.name\"\r\n      />\r\n      <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\r\n    </div>\r\n\r\n    <div class=\"mb-3\">\r\n      <label for=\"tel\" class=\"form-label\">收件人電話</label>\r\n      <Field\r\n        id=\"tel\"\r\n        name=\"mobile\"\r\n        type=\"tel\"\r\n        class=\"form-control\"\r\n        :class=\"{ 'is-invalid': errors['mobile'] }\"\r\n        placeholder=\"請輸入手機號碼\"\r\n        v-model=\"form.user.tel\"\r\n      />\r\n      <ErrorMessage name=\"mobile\" v-slot=\"{ message }\">\r\n        <span role=\"alert\" class=\"invalid-feedback\">{{ message }}</span>\r\n      </ErrorMessage>\r\n    </div>\r\n\r\n    <div class=\"mb-3\">\r\n      <label for=\"address\" class=\"form-label\">收件人地址</label>\r\n      <Field\r\n        id=\"address\"\r\n        name=\"地址\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        :class=\"{ 'is-invalid': errors['地址'] }\"\r\n        placeholder=\"請輸入地址\"\r\n        v-model=\"form.user.address\"\r\n      />\r\n      <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\r\n    </div>\r\n\r\n    <div class=\"mb-3\">\r\n      <label for=\"message\" class=\"form-label\">留言</label>\r\n      <textarea\r\n        id=\"message\"\r\n        class=\"form-control\"\r\n        cols=\"30\"\r\n        rows=\"10\"\r\n        v-model=\"form.message\"\r\n      ></textarea>\r\n    </div>\r\n    <div class=\"text-end\">\r\n      <button type=\"submit\" class=\"btn btn-danger\">送出訂單</button>\r\n    </div>\r\n  </Form>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { createOrder } from '@/api/order'\r\nimport schema from '@/utils/vee-validate-schema'\r\nimport { Form, Field, ErrorMessage } from 'vee-validate'\r\nexport default {\r\n  name: 'CheckoutForm',\r\n  components: { Form, Field, ErrorMessage },\r\n  setup() {\r\n    // 表單資料物件\r\n    const form = reactive({\r\n      user: {\r\n        name: '',\r\n        email: '',\r\n        tel: '',\r\n        address: ''\r\n      },\r\n      message: ''\r\n    })\r\n\r\n    const mySchema = {\r\n      姓名: 'required',\r\n      email: 'required|email',\r\n      mobile: schema.mobile,\r\n      地址: 'required'\r\n    }\r\n\r\n    // 送出並生成訂單方法\r\n    const formRef = ref(null)\r\n    const store = useStore()\r\n    const submitOrder = async () => {\r\n      // 提交訂單前先進行全體驗證\r\n      const valid = await formRef.value.validate()\r\n      if (valid) {\r\n        try {\r\n          const data = await createOrder(form)\r\n          alert(data.message)\r\n          formRef.value.resetForm()\r\n          form.message = ''\r\n          // 刷新購物車\r\n          store.dispatch('cart/findCart')\r\n        } catch (err) {\r\n          alert('購物車裡面沒有東西唷~')\r\n        }\r\n      }\r\n    }\r\n\r\n    return { form, schema: mySchema, formRef, submitOrder }\r\n  }\r\n}\r\n</script>\r\n","// 給 vee-validate 提供驗證規則函式\r\nexport default {\r\n  mobile(value) {\r\n    if (!value) return '請輸入手機號碼'\r\n    // 規則: 09開頭, 任意8個數字結尾\r\n    if (!/^09\\d{8}$/.test(value)) return '手機格式不正確'\r\n    return true\r\n  }\r\n}\r\n","import { render } from \"./CheckoutForm.vue?vue&type=template&id=3a6f297a\"\nimport script from \"./CheckoutForm.vue?vue&type=script&lang=js\"\nexport * from \"./CheckoutForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\github\\\\vue3-homeworks\\\\week6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"cart-none\">\r\n    <img src=\"@/assets/images/none.png\" alt=\"\" />\r\n    <p>購物車内暫時没有商品</p>\r\n    <a href=\"#\" class=\"btn btn-primary\" @click.prevent=\"$router.push('/')\">\r\n      繼續逛逛\r\n    </a>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'CartNone'\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.cart-none {\r\n  text-align: center;\r\n  padding: 100px 0;\r\n  img {\r\n    width: 180px;\r\n  }\r\n  p {\r\n    color: #999999;\r\n    padding: 20px 0;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./CartNone.vue?vue&type=template&id=d064c632&scoped=true\"\nimport script from \"./CartNone.vue?vue&type=script&lang=js\"\nexport * from \"./CartNone.vue?vue&type=script&lang=js\"\n\nimport \"./CartNone.vue?vue&type=style&index=0&id=d064c632&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\github\\\\vue3-homeworks\\\\week6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d064c632\"]])\n\nexport default __exports__","import { render } from \"./Index.vue?vue&type=template&id=35a4fe1f\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\github\\\\vue3-homeworks\\\\week6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/none.a7da9ce9.png\";","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CartNone.vue?vue&type=style&index=0&id=d064c632&lang=scss&scoped=true\"","import request from '@/utils/request'\r\nconst path = 'sheep-api'\r\n\r\n// 前台 API\r\n/**\r\n * 建立訂單\r\n * @param {Object} order - 訂單資料表單\r\n * @returns Promise\r\n */\r\nexport const createOrder = (order) => {\r\n  return request(`/api/${path}/order`, 'post', { data: order })\r\n}\r\n\r\n// 後台 API\r\n/**\r\n * 取得後台訂單列表\r\n * @param {Integer} page - 當前頁碼\r\n * @returns Promise\r\n */\r\nexport const getOrdersList = (page = 1) => {\r\n  return request(`/api/${path}/admin/orders?page=${page}`, 'get')\r\n}\r\n"],"sourceRoot":""}