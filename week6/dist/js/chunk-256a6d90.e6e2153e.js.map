{"version":3,"sources":["webpack:///./src/views/front/product/Index.vue","webpack:///./src/views/front/product/components/ProductsList.vue","webpack:///./src/views/front/product/components/ProductsList.vue?21f6","webpack:///./src/views/front/product/Index.vue?c200","webpack:///./src/api/product.js"],"names":["class","_createElementBlock","_createElementVNode","_createVNode","_component_ProductsList","style","_hoisted_2","_Fragment","_renderList","$setup","product","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_5","onClick","type","_hoisted_9","disabled","pagination","total_pages","_createBlock","_component_UiPagination","pages","onChangePage","name","setup","products","ref","getProducts","then","data","value","router","useRouter","checkDetail","push","isLoadingItem","store","useStore","addToCart","dispatch","count","changePager","page","__exports__","components","ProductsList","render","path","request","getProductById","getAdminProducts","category","uploadProduct","editProduct","deleteProduct"],"mappings":"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","file":"js/chunk-256a6d90.e6e2153e.js","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"row mt-4\">\r\n      <ProductsList />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductsList from './components/ProductsList.vue'\r\nexport default {\r\n  name: 'ProductsPage',\r\n  components: { ProductsList }\r\n}\r\n</script>\r\n","<template>\r\n  <table class=\"table align-middle\">\r\n    <thead>\r\n      <tr>\r\n        <th>圖片</th>\r\n        <th>商品名稱</th>\r\n        <th>價格</th>\r\n        <th></th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"product in products\" :key=\"product.id\">\r\n        <td style=\"width: 200px\">\r\n          <div\r\n            :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\r\n            style=\"\r\n              width: 100px;\r\n              height: 150px;\r\n              background-size: cover;\r\n              background-position: center;\r\n            \"\r\n          ></div>\r\n        </td>\r\n        <td>{{ product.title }}</td>\r\n        <td>\r\n          <div v-if=\"product.price === product.origin_price\" class=\"h5\">\r\n            {{ product.price }} 元\r\n          </div>\r\n          <div v-else>\r\n            <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\r\n            <div class=\"h5\">現在只要 {{ product.price }} 元</div>\r\n          </div>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group btn-group-sm\">\r\n            <button\r\n              @click=\"checkDetail(product.id)\"\r\n              type=\"button\"\r\n              class=\"btn btn-outline-secondary\"\r\n            >\r\n              查看更多\r\n            </button>\r\n            <button\r\n              @click=\"addToCart(product.id)\"\r\n              type=\"button\"\r\n              class=\"btn btn-danger\"\r\n              :disabled=\"isLoadingItem === product.id\"\r\n            >\r\n              <span\r\n                v-show=\"isLoadingItem === product.id\"\r\n                class=\"spinner-grow spinner-grow-sm\"\r\n              ></span>\r\n              加到購物車\r\n            </button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <UiPagination\r\n    v-if=\"pagination?.total_pages > 1\"\r\n    :pages=\"pagination\"\r\n    @change-page=\"changePager\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { getProducts } from '@/api/product'\r\nimport { useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nexport default {\r\n  name: 'ProductsList',\r\n  setup() {\r\n    // 頁面初始化時獲取產品列表\r\n    const products = ref(null)\r\n    const pagination = ref(null)\r\n    getProducts().then((data) => {\r\n      products.value = data.products\r\n      pagination.value = data.pagination\r\n    })\r\n\r\n    // 查看產品細節\r\n    const router = useRouter()\r\n    const checkDetail = (id) => {\r\n      router.push(`/product/${id}`)\r\n    }\r\n\r\n    // 加入購物車\r\n    const isLoadingItem = ref('')\r\n    const store = useStore()\r\n    const addToCart = (id) => {\r\n      isLoadingItem.value = id\r\n      store.dispatch('cart/addToCart', { id, count: 1 }).then(() => {\r\n        isLoadingItem.value = ''\r\n      })\r\n    }\r\n\r\n    // 換頁函式\r\n    const changePager = (page) => {\r\n      getProducts(page).then((data) => {\r\n        products.value = data.products\r\n        pagination.value = data.pagination\r\n      })\r\n    }\r\n\r\n    return {\r\n      products,\r\n      checkDetail,\r\n      isLoadingItem,\r\n      addToCart,\r\n      pagination,\r\n      changePager\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./ProductsList.vue?vue&type=template&id=6fe50366\"\nimport script from \"./ProductsList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\github\\\\vue3-homeworks\\\\week6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Index.vue?vue&type=template&id=cbb46e80\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\github\\\\vue3-homeworks\\\\week6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import request from '@/utils/request'\r\nconst path = 'sheep-api'\r\n\r\n// 前台 API\r\n/**\r\n * 取得產品列表\r\n * @param {Number} page - 當前頁碼\r\n * @returns Promise\r\n */\r\nexport const getProducts = (page = 1) => {\r\n  return request(`/api/${path}/products?page=${page}`, 'get')\r\n}\r\n\r\n/**\r\n * 根據id獲取產品的詳情\r\n * @param {String} id - 產品id\r\n * @returns Promise\r\n */\r\nexport const getProductById = (id) => {\r\n  return request(`/api/${path}/product/${id}`, 'get')\r\n}\r\n\r\n// 後台 API\r\n/**\r\n * 取得後台產品列表\r\n * @param {Number} page - 當前頁碼\r\n * @returns Promise\r\n */\r\nexport const getAdminProducts = (page = 1, category = '') => {\r\n  return request(`/api/${path}/admin/products?page=${page}`, 'get', { category })\r\n}\r\n\r\n/**\r\n * 新增一個產品\r\n * @param {Object} product - 要新增的產品資料\r\n * @returns Promise\r\n */\r\nexport const uploadProduct = (product) => {\r\n  return request(`/api/${path}/admin/product`, 'post', { data: product })\r\n}\r\n\r\n/**\r\n * 修改一個產品\r\n * @param {String} id - 要修改產品的ID\r\n * @param {Object} product - 要修改的產品\r\n * @returns Promise\r\n */\r\nexport const editProduct = (id, product) => {\r\n  return request(`/api/${path}/admin/product/${id}`, 'put', { data: product })\r\n}\r\n\r\n/**\r\n * 刪除一個產品\r\n * @param {String} id - 要刪除的產品ID\r\n * @returns Promise\r\n */\r\nexport const deleteProduct = (id) => {\r\n  return request(`/api/${path}/admin/product/${id}`, 'delete')\r\n}\r\n"],"sourceRoot":""}