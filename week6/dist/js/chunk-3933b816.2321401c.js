(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3933b816"],{"00b4":function(e,t,a){"use strict";a("ac1f");var c=a("23e7"),n=a("da84"),r=a("c65b"),l=a("e330"),o=a("1626"),s=a("861d"),d=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),i=n.Error,m=l(/./.test);c({target:"RegExp",proto:!0,forced:!d},{test:function(e){var t=this.exec;if(!o(t))return m(this,e);var a=r(t,this,e);if(null!==a&&!s(a))throw new i("RegExp exec method returned something other than an Object or null");return!!a}})},2129:function(e,t,a){},6965:function(e,t,a){"use strict";a.r(t);a("99af");var c=a("7a23"),n={class:"container mt-3"},r={class:"text-end"},l=["disabled"],o={class:"table align-middle"},s=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th"),Object(c["createElementVNode"])("th",null,"品名"),Object(c["createElementVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(c["createElementVNode"])("th",{class:"col-md-2"},"單價")])],-1),d={key:0},i={colspan:"6"},m=["onClick"],u={class:"input-group input-group-sm"},b={class:"input-group mb-3"},O=["onUpdate:modelValue","onChange","disabled"],j=["value"],p={class:"input-group-text",id:"basic-addon2"},f={class:"text-end"},v={key:0},V=Object(c["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),N={class:"text-end"},E=Object(c["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),h={class:"text-end text-success"},g={class:"my-5 row justify-content-center"};function C(e,t,a,C,k,x){var y,w,D=Object(c["resolveComponent"])("Loading"),B=Object(c["resolveComponent"])("CartNone"),S=Object(c["resolveComponent"])("CheckoutForm");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",n,[Object(c["createVNode"])(D,{active:C.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return C.clearAllCarts&&C.clearAllCarts.apply(C,arguments)}),class:"btn btn-outline-danger",type:"button",disabled:0===(null===(y=C.cartData)||void 0===y||null===(w=y.carts)||void 0===w?void 0:w.length)}," 清空購物車 ",8,l)]),Object(c["createElementVNode"])("table",o,[s,Object(c["createElementVNode"])("tbody",null,[0===C.cartData.carts.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",d,[Object(c["createElementVNode"])("td",i,[Object(c["createVNode"])(B)])])):Object(c["createCommentVNode"])("",!0),C.cartData.carts.length>0?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:1},Object(c["renderList"])(C.cartData.carts,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("button",{onClick:function(t){return C.removeCartItem(e.id)},type:"button",class:"btn btn-outline-danger btn-sm"}," x ",8,m)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.product.title),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",b,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{"onUpdate:modelValue":function(t){return e.qty=t},class:"form-select",onChange:function(t){return C.updateCartItem(e)},disabled:C.isLoadingItem===e.id},[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(20,(function(t){return Object(c["createElementVNode"])("option",{value:t,key:"".concat(t).concat(e.id)},Object(c["toDisplayString"])(t),9,j)})),64))],40,O),[[c["vModelSelect"],e.qty]]),Object(c["createElementVNode"])("span",p,Object(c["toDisplayString"])(e.product.unit),1)])])]),Object(c["createElementVNode"])("td",f," NT$"+Object(c["toDisplayString"])(e.total),1)])})),128)):Object(c["createCommentVNode"])("",!0)]),C.cartData.carts.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tfoot",v,[Object(c["createElementVNode"])("tr",null,[V,Object(c["createElementVNode"])("td",N,Object(c["toDisplayString"])(C.cartData.total),1)]),Object(c["createElementVNode"])("tr",null,[E,Object(c["createElementVNode"])("td",h,Object(c["toDisplayString"])(C.cartData.final_total),1)])])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",g,[Object(c["createVNode"])(S)])])}a("b0c0");var k={class:"mb-3"},x=Object(c["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),y={class:"mb-3"},w=Object(c["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),D={class:"mb-3"},B=Object(c["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),S={role:"alert",class:"invalid-feedback"},F={class:"mb-3"},I=Object(c["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),L={class:"mb-3"},U=Object(c["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),q=Object(c["createElementVNode"])("div",{class:"text-end"},[Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function R(e,t,a,n,r,l){var o=Object(c["resolveComponent"])("Field"),s=Object(c["resolveComponent"])("ErrorMessage"),d=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createBlock"])(d,{ref:"formRef",class:"col-md-6",autocomplete:"off","validation-schema":n.schema,onSubmit:n.submitOrder},{default:Object(c["withCtx"])((function(e){var a=e.errors;return[Object(c["createElementVNode"])("div",k,[x,Object(c["createVNode"])(o,{id:"email",name:"email",type:"email",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",modelValue:n.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(s,{name:"email",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",y,[w,Object(c["createVNode"])(o,{id:"name",name:"姓名",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",modelValue:n.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(s,{name:"姓名",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",D,[B,Object(c["createVNode"])(o,{id:"tel",name:"mobile",type:"tel",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":a["mobile"]}]),placeholder:"請輸入手機號碼",modelValue:n.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(s,{name:"mobile"},{default:Object(c["withCtx"])((function(e){var t=e.message;return[Object(c["createElementVNode"])("span",S,Object(c["toDisplayString"])(t),1)]})),_:1})]),Object(c["createElementVNode"])("div",F,[I,Object(c["createVNode"])(o,{id:"address",name:"地址",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",modelValue:n.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(s,{name:"地址",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",L,[U,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=function(e){return n.form.message=e})},null,512),[[c["vModelText"],n.form.message]])]),q]})),_:1},8,["validation-schema","onSubmit"])}var M=a("1da1"),_=(a("96cf"),a("5502")),z=a("f8b7"),A=(a("ac1f"),a("00b4"),{mobile:function(e){return e?!!/^09\d{8}$/.test(e)||"手機格式不正確":"請輸入手機號碼"}}),$=a("7bb1"),J={name:"CheckoutForm",components:{Form:$["c"],Field:$["b"],ErrorMessage:$["a"]},setup:function(){var e=Object(c["reactive"])({user:{name:"",email:"",tel:"",address:""},message:""}),t={"姓名":"required",email:"required|email",mobile:A.mobile,"地址":"required"},a=Object(c["ref"])(null),n=Object(_["b"])(),r=function(){var t=Object(M["a"])(regeneratorRuntime.mark((function t(){var c,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.value.validate();case 2:if(c=t.sent,!c){t.next=17;break}return t.prev=4,t.next=7,Object(z["a"])(e);case 7:r=t.sent,alert(r.message),a.value.resetForm(),e.message="",n.dispatch("cart/findCart"),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](4),alert("購物車裡面沒有東西唷~");case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(){return t.apply(this,arguments)}}();return{form:e,schema:t,formRef:a,submitOrder:r}}},T=a("6b0d"),G=a.n(T);const H=G()(J,[["render",R]]);var K=H,P=a("8474"),Q=a.n(P),W=function(e){return Object(c["pushScopeId"])("data-v-d064c632"),e=e(),Object(c["popScopeId"])(),e},X={class:"cart-none"},Y=W((function(){return Object(c["createElementVNode"])("img",{src:Q.a,alt:""},null,-1)})),Z=W((function(){return Object(c["createElementVNode"])("p",null,"購物車内暫時没有商品",-1)}));function ee(e,t,a,n,r,l){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",X,[Y,Z,Object(c["createElementVNode"])("a",{href:"#",class:"btn btn-primary",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(t){return e.$router.push("/")}),["prevent"]))}," 繼續逛逛 ")])}var te={name:"CartNone"};a("ae40");const ae=G()(te,[["render",ee],["__scopeId","data-v-d064c632"]]);var ce=ae,ne={name:"Cart",components:{CheckoutForm:K,CartNone:ce},setup:function(){var e=Object(c["ref"])(!0),t=Object(c["ref"])(""),a=Object(_["b"])();a.dispatch("cart/findCart").then((function(){e.value=!1}));var n=Object(c["computed"])((function(){return a.state.cart.cartData})),r=function(e){a.dispatch("cart/removeCart",e)},l=function(){a.dispatch("cart/clearAllCarts")},o=function(e){t.value=e.id,a.dispatch("cart/updateCart",{prodcutId:e.id,count:e.qty}).then((function(){t.value=""}))};return{isLoading:e,isLoadingItem:t,cartData:n,removeCartItem:r,clearAllCarts:l,updateCartItem:o}}};const re=G()(ne,[["render",C]]);t["default"]=re},8474:function(e,t,a){e.exports=a.p+"img/none.a7da9ce9.png"},ae40:function(e,t,a){"use strict";a("2129")},f8b7:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return l}));var c=a("b775"),n="sheep-api",r=function(e){return Object(c["a"])("/api/".concat(n,"/order"),"post",{data:e})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Object(c["a"])("/api/".concat(n,"/admin/orders?page=").concat(e),"get")}}}]);
//# sourceMappingURL=chunk-3933b816.2321401c.js.map