{"version":3,"sources":["webpack:///./src/views/front/login/Index.vue?0270","webpack:///./src/views/front/login/Index.vue","webpack:///./src/views/front/login/Index.vue?c22f","webpack:///./src/api/login.js","webpack:///./src/assets/images/books2.png"],"names":["class","_createElementVNode","type","src","_imports_0","_createElementBlock","_hoisted_5","_createVNode","_component_Form","ref","onSubmit","$setup","autocomplete","errors","_component_Field","name","placeholder","username","$event","rules","_component_ErrorMessage","password","_hoisted_6","_hoisted_7","components","Form","Field","ErrorMessage","setup","formRef","form","reactive","router","useRouter","route","useRoute","login","value","validate","valid","signin","token","expired","document","cookie","Date","alert","push","query","redirectUrl","response","data","message","__exports__","render","userInfo","request","userCheck","module","exports"],"mappings":"kHAAA,W,8MCCOA,MAAM,mB,GACJA,MAAM,W,GACJA,MAAM,a,GACJA,MAAM,S,uBACTC,gCAAa,UAAT,QAAI,M,uBAgCNA,gCAA0D,UAAlDD,MAAM,gBAAgBE,KAAK,UAAS,SAAK,M,uBAKvDD,gCAIM,OAJDD,MAAM,YAAU,CACnBC,gCAAqD,MAAjDD,MAAM,SAAO,CAACC,gCAAkB,YAAZ,SAAP,6BAAmB,KAACA,gCAAM,MAA1B,6BAA0B,WAC3CA,gCAAuD,KAApDD,MAAM,QAAM,8BAAC,sBAAkBC,gCAAiB,YAAX,UACxCA,gCAAwD,OAAnDD,MAAM,UAAUG,IAAAC,QAHvB,M,6LAzCJC,gCA+CM,MA/CN,EA+CM,CA9CJJ,gCA6CM,MA7CN,EA6CM,CA5CJA,gCAqCM,MArCN,EAqCM,CApCJA,gCAmCM,MAnCN,EAmCM,CAlCJK,EACAC,yBAgCOC,EAAA,CA/BLC,IAAI,UACHC,SAAQC,QACTX,MAAM,aACNY,aAAa,OAJf,C,8BAOE,gBAFUC,EAEV,EAFUA,OAEV,MAFgB,CAEhBN,yBAOEO,EAAA,CANAC,KAAK,QACLb,KAAK,QACLc,YAAY,Q,WACHL,OAAKM,S,qDAALN,OAAKM,SAAQC,IACtBC,MAAM,iBACLnB,MAAK,0CAAkBa,EAAO,YANjC,+BAQAN,yBAGgBa,EAAA,CAFdL,KAAK,QACLf,MAAM,iCAERO,yBAOEO,EAAA,CANAC,KAAK,KACLb,KAAK,WACLc,YAAY,W,WACHL,OAAKU,S,qDAALV,OAAKU,SAAQH,IACtBC,MAAM,WACLnB,MAAK,0CAAkBa,EAAO,SANjC,+BAQAN,yBAGgBa,EAAA,CAFdL,KAAK,KACLf,MAAM,iCAERsB,M,KA/BF,oBAoCJC,M,0EAcS,GACbR,KAAM,QACNS,WAAY,CAAEC,YAAMC,aAAOC,qBAC3BC,MAHa,WAIX,IAAMC,EAAUpB,iBAAI,MAEdqB,EAAOC,sBAAS,CACpBd,SAAU,GACVI,SAAU,KAGNW,EAASC,iBACTC,EAAQC,iBACRC,EAAI,yDAAI,0HACQP,EAAQQ,MAAMC,WADtB,UACNC,EADM,QAERA,EAFQ,0CAIyBC,eAAOV,GAJhC,gBAIAW,EAJA,EAIAA,MAAOC,EAJP,EAIOA,QACfC,SAASC,OAAT,mBAA8BH,EAA9B,qBAAgD,IAAII,KAAKH,GAAzD,KACAI,MAAM,UACNd,EAAOe,KAAKb,EAAMc,MAAMC,aAAe,UAP/B,qDASRnB,EAAKT,SAAW,GAChByB,MAAM,KAAII,SAASC,KAAKC,QAAU,KAV1B,0DAAJ,qDAeV,MAAO,CAAEvB,UAASC,OAAMM,W,iCC7E5B,MAAMiB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,oCCTf,oFAQad,EAAS,SAACe,GACrB,OAAOC,eAAQ,gBAAiB,OAAQD,IAO7BE,EAAY,WACvB,OAAOD,eAAQ,kBAAmB,U,qBCjBpCE,EAAOC,QAAU,IAA0B","file":"js/chunk-7d698648.134cbee3.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=0&id=6c74224f&lang=scss&scoped=true\"","<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"wrapper\">\r\n      <div class=\"input-box\">\r\n        <div class=\"login\">\r\n          <h1>歡迎回來</h1>\r\n          <Form\r\n            ref=\"formRef\"\r\n            @submit=\"login\"\r\n            class=\"login-form\"\r\n            autocomplete=\"off\"\r\n            v-slot=\"{ errors }\"\r\n          >\r\n            <Field\r\n              name=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              v-model=\"form.username\"\r\n              rules=\"email|required\"\r\n              :class=\"{ 'is-invalid': errors['email'] }\"\r\n            />\r\n            <ErrorMessage\r\n              name=\"email\"\r\n              class=\"invalid-feedback text-center\"\r\n            ></ErrorMessage>\r\n            <Field\r\n              name=\"密碼\"\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              v-model=\"form.password\"\r\n              rules=\"required\"\r\n              :class=\"{ 'is-invalid': errors['密碼'] }\"\r\n            />\r\n            <ErrorMessage\r\n              name=\"密碼\"\r\n              class=\"invalid-feedback text-center\"\r\n            ></ErrorMessage>\r\n            <button class=\"buttom-sumbit\" type=\"submit\">LOGIN</button>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"rightbox\">\r\n        <h2 class=\"title\"><span>STORY</span>&<br />DREAM</h2>\r\n        <p class=\"desc\">Pick your perfect <span>book</span></p>\r\n        <img class=\"bookImg\" src=\"@/assets/images/books2.png\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref } from 'vue'\r\nimport { signin } from '@/api/login'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { Form, Field, ErrorMessage } from 'vee-validate'\r\nexport default {\r\n  name: 'Login',\r\n  components: { Form, Field, ErrorMessage },\r\n  setup() {\r\n    const formRef = ref(null)\r\n    // 登入表單\r\n    const form = reactive({\r\n      username: '',\r\n      password: ''\r\n    })\r\n\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const login = async () => {\r\n      const valid = await formRef.value.validate()\r\n      if (valid) {\r\n        try {\r\n          const { token, expired } = await signin(form)\r\n          document.cookie = `hexToken=${token}; expires=${new Date(expired)};`\r\n          alert('登入成功! ')\r\n          router.push(route.query.redirectUrl || '/admin')\r\n        } catch (err) {\r\n          form.password = ''\r\n          alert(err.response.data.message + '!')\r\n        }\r\n      }\r\n    }\r\n\r\n    return { formRef, form, login }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;700&display=swap');\r\n\r\n$bgColor: #cbc0d3;\r\n$fontColor: #8e9aaf;\r\n$inputboxColor: #eac7cc;\r\n$borderColor: #ce7d88;\r\n\r\n.login-container {\r\n  position: relative;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n  background: $bgColor;\r\n  font-family: 'Baloo 2', '微軟正黑體';\r\n}\r\n\r\n.wrapper {\r\n  position: relative;\r\n  background-color: #f6f6f6;\r\n  width: 650px;\r\n  height: 415px;\r\n  border-radius: 5px;\r\n  box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.input-box {\r\n  position: absolute;\r\n  top: -10%;\r\n  left: 5%;\r\n  width: 320px;\r\n  height: 500px;\r\n  background-color: $inputboxColor;\r\n  border-radius: 5px;\r\n  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);\r\n  z-index: 10;\r\n\r\n  h1 {\r\n    text-align: center;\r\n    color: #f6f6f6;\r\n    margin-top: 95px;\r\n    font-size: 2em;\r\n    letter-spacing: 8px;\r\n  }\r\n\r\n  button {\r\n    font-family: 'Baloo 2';\r\n    margin: 25px;\r\n    padding: 12px;\r\n    letter-spacing: 3px;\r\n    font-size: 1em;\r\n    border-color: $borderColor;\r\n    border-radius: 10px;\r\n    outline: none;\r\n    display: block;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      background-color: $bgColor;\r\n      color: #f6f6f6;\r\n      transition: background-color 0.5s ease-out;\r\n    }\r\n  }\r\n\r\n  // 表單\r\n  .login-form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding-top: 35px;\r\n    input {\r\n      width: 65%;\r\n      padding: 12px;\r\n      background-color: $inputboxColor;\r\n      border: none;\r\n      border-bottom: 1px solid rgba(246, 246, 246, 0.5);\r\n      color: $borderColor;\r\n      font-size: 16px;\r\n\r\n      &::placeholder {\r\n        color: #f6f6f6;\r\n        letter-spacing: 2px;\r\n        font-size: 16px;\r\n      }\r\n\r\n      &:focus {\r\n        color: $borderColor;\r\n        outline: none;\r\n        border-bottom: 1.2px solid rgba(206, 125, 136, 0.7);\r\n        font-size: 20px;\r\n        transition: 0.5s;\r\n      }\r\n    }\r\n    .buttom-sumbit {\r\n      margin-top: 45px;\r\n    }\r\n  }\r\n}\r\n\r\n.rightbox {\r\n  position: absolute;\r\n  width: 50%;\r\n  right: -2%;\r\n\r\n  .title {\r\n    color: $fontColor;\r\n    font-size: 1.8em;\r\n    line-height: 1.1em;\r\n    letter-spacing: 3px;\r\n    text-align: center;\r\n    font-weight: 300;\r\n    margin-top: 20%;\r\n  }\r\n\r\n  .desc {\r\n    margin-top: -8px;\r\n    font-size: 0.8em;\r\n    letter-spacing: 2px;\r\n    color: $fontColor;\r\n    text-align: center;\r\n  }\r\n\r\n  span {\r\n    color: $inputboxColor;\r\n  }\r\n\r\n  .bookImg {\r\n    position: relative;\r\n    width: 150px;\r\n    height: 150px;\r\n    top: 45%;\r\n    left: 27%;\r\n    opacity: 0.8;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Index.vue?vue&type=template&id=6c74224f&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=6c74224f&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\github\\\\vue3-homeworks\\\\week6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c74224f\"]])\n\nexport default __exports__","import request from '@/utils/request'\r\n// const path = 'sheep-api'\r\n\r\n/**\r\n * 登入API\r\n * @param {Object} userInfo - 登入表單(username, password)\r\n * @returns Promise\r\n */\r\nexport const signin = (userInfo) => {\r\n  return request('/admin/signin', 'post', userInfo)\r\n}\r\n\r\n/**\r\n * 驗證登入狀態\r\n * @returns Promise\r\n */\r\nexport const userCheck = () => {\r\n  return request('/api/user/check', 'post')\r\n}\r\n","module.exports = __webpack_public_path__ + \"img/books2.026151a2.png\";"],"sourceRoot":""}